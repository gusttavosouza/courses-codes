<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>Page Title</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
  </head>
  <body>
    <div id="app">
      <p>Informe o nome do Usuário:</p>
      <input type="text" id="inputEntrada" />
      <button id="botaoBusca" onclick="buscaResolve()">Buscar</button>

      <div id="repositorios">
        <ul></ul>
      </div>
    </div>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script>
        var inputElement = document.querySelector('#inputEntrada')
        var listElements = document.querySelector('#app ul')


        const buscaResolve = () => {
            var pCarregando = document.createElement('p')
            var pText2 = document.createTextNode('Carregando...')
            pCarregando.appendChild(pText2)
            listElements.appendChild(pCarregando)

            var nomeUser = inputElement.value
            if (nomeUser !== "") {
                axios.get(`https://api.github.com/users/${nomeUser}/repos`)
                    .then(function (response) {
                        listElements.innerHTML = ""
                        var listaRepositorios = response.data

                        for (repositorio of listaRepositorios) {
                            var liElement = document.createElement('li')
                            var liText = document.createTextNode(repositorio.name)

                            liElement.appendChild(liText)
                            listElements.appendChild(liElement)
                        }

                        //listElements.removeChild(pCarregando)

                    })
                    .catch(function (error) {
                        console.log(error)
                        alert("Infelizmente não foi possível encontrar usuário", error)
                    })

                }
            }
    </script>
  </body>
</html>
